<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;1,100;1,300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><<$title>></title>
</head>
<style>

</style>
<body>
<div class="base-header">
    <header>
        <div class="header__title">
            <img src="/assets/logo.png" alt="logo">
            <h1><<$name>></h1>
            
        </div>
         <div class="top-page">
        <div class="top-page__title">
            <h1>Hello There!</h1>
        </div>
        <div class="top-page__subtitle">
            <h2>Welcome to a new world</h2>
        </div>
        <div class="description">
            <p>This is a new world of simple, fast and Easy to use rendering engines</p>
            <p>To Change this page go to /pages/index.html</p>
        </div>
    </div>
    </header>
   
</div>

<div class="container-fluid">
 <nav class="sidebar">
    <div class="mode-buttons selector">
        <button class="client-mode active">Client Mode</button>
        <button class="server-mode">Server Mode</button>
    </div>
    <ul class="nav flex-column client-mode client-mode_sidebar">
        <li class="nav-item client_buttons active">
            <a class="nav-link" href="#components">
                <i class="fas fa-code"></i> Components
            </a>
        </li>
        <li class="nav-item client_buttons">
            <a class="nav-link" href="#options">
                <i class="fas fa-cog"></i> Options
            </a>
        </li>
        <li class="nav-item client_buttons">
            <a class="nav-link" href="#layouts">
                <i class="fas fa-th"></i> Layouts
            </a>
        </li>
        <li class="nav-item client_buttons">
            <a class="nav-link" href="#variables">
                <i class="fas fa-clipboard"></i> Variables
            </a>
        </li>
        <li class="nav-item client_buttons">
            <a class="nav-link" href="#animations">
                <i class="fas fa-film"></i> Animations
            </a>
        </li>
    </ul>
    <ul class="nav flex-column server-mode_sidebar">
        <li class="nav-item server_buttons">
            <a class="nav-link active" href="#routes_define">
                <i class="fas fa-route"></i> Defining Routes
            </a>
        </li>
        <li class="nav-item server_buttons">
            <a class="nav-link" href="#database">
                <i class="fas fa-database"></i> Using the Database
            </a>
        </li>
        <li class="nav-item server_buttons">
            <a class="nav-link" href="#database_connect">
                <i class="fas fa-plug"></i> Connecting to the Database
            </a>
        </li>
    </ul>
</nav>

</div>

<div class="example_code client_code" id="client_code">
    <div class="code_block _1" id="components">
        <h4>To use components in the html file use  &lt;&lt;/component&gt;</h4>
        <p>Example</p>
        <pre>
            &lt;div class="custom-div"&gt;
                &lt;&lt;/component&gt;<br>
                &lt;&lt;/component&gt;<br>
                &lt;&lt;/component&gt;<br>
            &lt;/div&gt;
        </pre>
        <p>The components are called by file name in the /components folder</p>
    </div>
    <div class="code_block _2" id="options">
        <h4>The options.json is placed in the pages folder or u can place custom ones in a sub path </h4>
        <p>This is an example /options.json</p>
        <pre>
            {
                "layout": "main",
                "scripts": [
                    "home.js"
                ],
                "styles": [
                    "home.css"
                ],
                "render_options": {
                    "title": "Home",
                    "name": "Obsidian Engine"
                },
                "meta":{
                  "title": "Obsidian Engine",
                  "description": "This is the demo site of the obsidian engine"
                }
            }
        </pre>
        <p>The layout is defined in the /layouts folder</p>
        <p>render_options is used to define variables that can be used in a html file <a href="#variables">Go There</a></p>
        <p>The <i>META</i> tag is used to define meta attributes for all the pages in the dir</p>
        <p>The <i>STYLES</i> are the styles that you want to use in every rendered file using the options.json, They are defined in the public/css </p>
        <p>The <i>SCRIPTS</i> are the scripts that you want to use in every rendered file using the options.json, They are defined in the public/js </p>
    </div>
    <div class="code_block _3" id="layouts">
        <h4>The layouts are found by file name so if we want the main layout we use layouts/main</h4>
        <p>Example</p>
        <pre>
            &lt;!DOCTYPE html&gt;
            &lt;html lang="en"&gt;
            &lt;head&gt;
                &lt;meta charset="UTF-8"&gt;
                &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
                &lt;title>&lt;&lt;title&gt;&lt;/title&gt;
                &lt;link rel="stylesheet" href="css/style.css"&gt;
                &lt;script src="js/script.js"&gt;&lt;/script&gt;
            &lt;/head&gt;
            &lt;body&gt;
                &lt;div class="main"&gt;
                    &lt;div class="header"&gt;
                        &lt;div class="header__title"&gt;
                            &lt;h1>&lt;&lt;title&gt;&lt;/h1&gt;
                        &lt;/div&gt;
                        &lt;div class="header__subtitle"&gt;
                            &lt;h2>&lt;&lt;subtitle&gt;&lt;/h2&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class="content"&gt;
                        &lt;&lt;$content&gt; //This is where the content of the pages that use the layout is rendered
                    &lt;/div&gt;
                    &lt;div class="footer"&gt;
                        &lt;div class="footer__description"&gt;
                            &lt;p>&lt;&lt;description&gt;&lt;/p&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/body&gt;
            &lt;/html&gt;
        </pre>
        <p>
            The &lt;&lt;$content&gt; is used to render the content of the pages that use the layout
        </p>
    </div>
    <div class="code_block _4" id="variables">
        <h4>The variables are defined in the options.json file and can also be defined in the query params so /route?param1=dwd </h4>
        <p>Example</p>
        <pre>
            &lt;&lt;$title&gt;
        </pre>
        <p>
            To use the variables in the html file use &lt;&lt;$variable_name&gt;
        </p>
        <p>Note: The variables are defined in the options.json file and can also be defined in the query params so /route?param1=dwd </p>
        <p>And if a variable is not found in the options.json or the query params it will not  be changed</p>
    </div>
    <div class="code_block _5" id="components_file">
        <h4>To use components in the html file use  &lt;&lt;/component&gt;</h4>
        <p>Example component</p>
        <pre>
            &lt;div class="custom-div"&gt;
                This is a custom div component.
            &lt;/div&gt;
        </pre>
        <p>The components are called by file name in the /components folder</p>
    </div>
    <div class="code_block" id="animations">
        <h4>Animations  Can be used in the JavaScript file </h4>
        <p>Example:</p>
        <pre>
            const element = document.querySelector(".custom-div");
            fadeIn(element, 1000);
            fadeOut(element, 1000);
            slideIn(element, 1000);
            slideOut(element, 1000);
        </pre>
        <p>These are the animations that can be used</p>
        <ol>
            <li>fadeIn(element, duration)</li>
            <li>fadeOut(element, duration)</li>
            <li>slideIn(element, duration)</li>
            <li>slideOut(element, duration)</li>
            <li>slideLeft(element, duration)</li>
            <li>slideRight(element, duration)</li>
            <li>slideUp(element, duration)</li>
            <li>slideDown(element, duration)</li>
        </ol>
    </div>
</div>

<div class="example_code server_code hidden" id="server_code">
    <div class="code_block" id="routes_define">
        <h4>To Add a new route to the /api base route (e.g /api/open etc)</h4>
        <p>Example</p>
        <pre>
            const { Router } = require("../modules");
            const router = new Router();


            router.basePath = "/";

            router.get("/", (req, res) => {
                res.send("Hello World!");
            });


            module.exports = router;
        </pre>
        <p>To define a route place the file in the /api folder </p>
        <p>The router.basePath defines the main path of the router file</p>
        <p>The router.get defines the method and the path of the route</p>
    </div>
    <div class="code_block" id="database">
        <h4>To use the database use the database module</h4>
        <p>Example:</p>
        <pre>
           const { Table } = require("../modules");
        const table = new Table();
         table.name = "users";

table.setSchema({
    username: {
        type: "string",
        required: true,
    },
    password: {
        type: "string",
        required: true,
    },
    email: {
        type: "string",
        required: true,
        unique: true
    },
    });


module.exports = table;
        </pre>
        <p>To define a table go to the /models folder </p>
        <pre>
            const usersModel = require("../models/users");


usersModel.find({}).then((users) => {
  console.log(users);
});

        </pre>
        <p>To use the table u call the file and all the functionality will come with it  </p>
    </div>
    <div class="code_block" id="database_connect">
        <h4>Using the database outside the engine</h4>
        <p>To use the database outside the engine we have made a node module to help with that</p>
        <pre>
            npm i obsidian-vault
        </pre>
        <p>The The Database is always using a port which is specified in the obsidian.config.js</p>
        <pre>{
  "name": "An Obsidian App",
  "view_engine": "html",
  "port": 3000,
  "db_port": 27017, // the database port here is 27017
  "db_name": "obsidian",
  "db_url": "",
  "mode": "dev",
  "no_imports": false,
  "workers": {
    "api": {
      "port": 3001,
      "path": "/api",
      "enabled": true,
      "restricted": false
    }
  }
}
</pre>
<p> When using the node module we need to set the url to the url of the server where the engine is hosted </p>
        <p>Example:</p>
        <pre>
            const obsidian = require("obsidian-vault")
obsidian.init("http://localhost:27017").then(async (result) => {
    if (result) {
        console.log("Connected to Obsidian")
        
    }
    })
        </pre>
    </div>
</div>

<script>



const clientCodeButton = document.getElementById("client_code");
const codeBlocks = document.querySelectorAll(".code_block");
const serverCodeButton = document.getElementById("server_code");
const clientCodeSection = document.querySelector(".example_code.client_code");
const serverCodeSection = document.querySelector(".example_code.server_code");
const clientModeButton = document.querySelector(".client-mode");
const serverModeButton = document.querySelector(".server-mode");
const sidebar = document.querySelector(".sidebar");
const serverModeSidebar = document.querySelector(".server-mode_sidebar");
const clientModeSidebar = document.querySelector(".client-mode_sidebar");
const clientModeSidebarButtons = document.querySelectorAll(".client_buttons")
const  serverModeSidebarButtons = document.querySelectorAll(".server_buttons")

function toggleSidebar() {
    if (window.innerWidth <= 768) {
        // Hide the sidebar on smaller screens
        sidebar.style.display = "none";
    } else {
        // Show the sidebar on larger screens
        sidebar.style.display = "block";
    }
}

// Call the function initially
toggleSidebar();

// Listen for window resize events and adjust the sidebar accordingly
window.addEventListener("resize", toggleSidebar);

console.log(clientModeSidebarButtons)
function setActive(clickedButton, buttons) {
    buttons.forEach(button => {
        if (button === clickedButton) {
            button.classList.add("active");
        } else {
            button.classList.remove("active");
        }
    });
}


// Add click event listeners to client mode buttons
clientModeSidebarButtons.forEach(button => {
   console.log(button)
  button.addEventListener("click", () => {
        setActive(button, clientModeSidebarButtons);
    });
});

// Add click event listeners to server mode buttons
serverModeSidebarButtons.forEach(button => {
    button.addEventListener("click", () => {
        setActive(button, serverModeSidebarButtons);
    });
});



const options = {
    threshold: 0.01
};

const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            fadeIn(entry.target, 1000);
        }
    });
}, options);

// Add the code sections to the observer
codeBlocks.forEach(codeBlock => {
    observer.observe(codeBlock);
});

function toggleSidebarMode() {
      if (clientModeButton.classList.contains("active")) {
         serverModeSidebar.style.display = "none";
         clientModeSidebar.style.display = "block";
      } else {
         serverModeSidebar.style.display = "block";
         clientModeSidebar.style.display = "none";
      }
}

clientModeButton.addEventListener("click", () => {
    popOut(clientCodeButton, 1000);
    clientCodeSection.style.display = "block";
    serverCodeSection.style.display = "none";
    fadeIn(clientCodeSection, 1000);
    fadeOut(serverCodeSection, 1000);
    clientModeButton.classList.add("active");
    serverModeButton.classList.remove("active");
    toggleSidebarMode();
});

serverModeButton.addEventListener("click", () => {
    popOut(serverModeButton, 1000);
    clientCodeSection.style.display = "none";
    serverCodeSection.style.display = "block";
    fadeOut(clientCodeSection, 1000);
    fadeIn(serverCodeSection, 1000);
    fadeIn(serverCodeSection, 1000);
    clientModeButton.classList.remove("active");
    serverModeButton.classList.add("active");
    toggleSidebarMode();
});

// Custom function to add fade-in effect

</script>
</body>
</html>
